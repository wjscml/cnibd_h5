webpackJsonp([3],{Qt9A:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("ah2Q");function n(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}function a(e,t){if(!n(e,t)){var s=e.className.split(" ");s.push(t),e.className=s.join(" ")}}var r={data:function(){return{dots:[],currentPageIndex:0}},props:{loop:{type:Boolean,default:!0},autoPlay:{type:Boolean,default:!0},interval:{type:Number,default:4e3}},mounted:function(){var e=this;setTimeout(function(){e._setSliderWidth(),e.dots=new Array(e.children.length),e._initSlider(),e.autoPlay&&e._play()},20),window.addEventListener("resize",function(){e.slider&&(e._setSliderWidth(!0),e.slider.refresh())})},destroyed:function(){clearTimeout(this.timer)},methods:{_setSliderWidth:function(e){this.children=this.$refs.sliderGroup.children;for(var t=0,s=this.$refs.slider.clientWidth,i=0;i<this.children.length;i++){var n=this.children[i];a(n,"slider-item"),n.style.width=s+"px",t+=s}this.loop&&!e&&(t+=2*s),this.$refs.sliderGroup.style.width=t+"px"},_initSlider:function(){var e=this;this.slider=new i.a(this.$refs.slider,{click:!0,scrollX:!0,scrollY:!1,eventPassthrough:"vertical",momentum:!1,snap:{loop:!0,threshold:.3,speed:500}}),this.slider.on("scrollEnd",function(){var t=e.slider.getCurrentPage().pageX;e.currentPageIndex=t,e.autoPlay&&(clearTimeout(e.timer),e._play())}),this.slider.on("scrollStart",function(){clearTimeout(e.timer)})},_play:function(){var e=this,t=this.currentPageIndex;this.loop&&(t+=1),console.log(t),this.timer=setTimeout(function(){e.slider.next(500)},this.interval)}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"slider",staticClass:"slider"},[t("div",{ref:"sliderGroup",staticClass:"slider-group"},[this._t("default")],2)])},staticRenderFns:[]};var l=s("D8HT")(r,o,!1,function(e){s("i4uI")},null,null).exports,c=s("bh5B"),d=s("A2FV"),h=s("tL1G"),u=s("qqiS"),p=s("/gb8"),f=s("dyDs"),v={data:function(){return{slide:[],scrollH:0,news:[],newsNav:[],type:0,page:0,tips:"上滑加载更多",downTips:"下拉刷新",isShow:!0,isLoad:null,isMoreTab:null,shareVal:{title:"赛恩财经:聚合财经新媒体",summary:"赛恩财经，提供全球股票,外汇,期货,债券,基金和数字货币等数十万种金融投资产品的实时行情和新闻资讯,以及多种投资工具。",thumb:"https://cnibd.oss-cn-beijing.aliyuncs.com/resource/images/sharelogo.png"}}},created:function(){this.scrollX=!0,this.scrollY=!1,this.eventPassthrough="vertical",this.probeType=3,this.pullUpLoad=!0,this.pullDownRefresh=!0,this._getSlider(),this._getNewsNav(),this._getNews()},mounted:function(){Object(f.a)(this.shareVal)},methods:{loadImage:function(){this.checkLoaded||(this.$refs.newsWrapper.refresh(),this._getNews(),this.checkLoaded=!0)},_getSlider:function(){var e=this;Object(p.a)("/slide").then(function(t){0===t.data.errorCode?e.slide=t.data.data:e.slide=[]})},_getNewsNav:function(){var e=this;Object(p.a)("/categories").then(function(t){0===t.data.errorCode&&(e.newsNav=t.data.data,e.$nextTick(function(){for(var t=0,s=0;s<e.newsNav.length;s++)t+=e.$refs.navBtn[s].getBoundingClientRect().width;e.$refs.navContent.style.width=t+"px"}))})},_getNews:function(){var e=this;Object(p.a)("/list?page=0&type="+this.type).then(function(t){0===t.data.errorCode?(e.news=t.data.data,e.$nextTick(function(){e.navHeight=e.$refs.navWrapper.clientHeight,e.topHeight=e.$refs.newsMark.getBoundingClientRect().top,e.minTranslateY=e.navHeight-e.topHeight,e.$refs.newsWrapper.$el.style.top=e.topHeight+"px"})):(e.news=[],e.tips="暂无数据")}).catch(function(t){t.res||(e.news=[],e.tips="网络不给力，请稍后重试")})},loadMore:function(){var e=this;this.tips="加载中...",this.isLoad=!0,this.page++,Object(p.a)("/list?page="+this.page+"&type="+this.type).then(function(t){e.isLoad=!1,0===t.data.errorCode?(e.news=e.news.concat(t.data.data),e.tips="上滑加载更多"):e.tips="没有更多数据了~"}).catch(function(t){t.res||(e.isLoad=!1,e.tips="网络不给力，请稍后重试")})},change:function(e){this.type=e,this.page=0,this.scrollCenter(e),this.isMoreTab=!1},scroll:function(e){this.scrollH=e.y},scrollCenter:function(e){this.$refs.navScroll.scrollToElement(this.$refs.navBtn[e],300,!0,!0),this.$refs.navScroll.refresh()},scrollTop:function(){this.$refs.newsWrapper.scrollTo(0,this.minTranslateY,20)},touchToEnd:function(){this.loadMore()},scrollToTop:function(){this.downTips="松开刷新"},pullingDown:function(){var e=this;this.news=[],this.downTips="正在刷新",setTimeout(function(){e._getNews(),e.downTips="下拉刷新"},400)},showMoreTab:function(){this.isMoreTab=!0},hideMoreTab:function(){this.isMoreTab=!1}},watch:{type:function(e){this._getNews(),this.scrollTop()},scrollH:function(e){if(e<=0){var t=Math.max(this.minTranslateY,e);this.$refs.navWrapper.style.transform="translate3d(0, "+t+"px, 0)"}}},components:{"news-column":d.a,"load-tips":h.a,loading:u.a,slider:l,scroll:c.a},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"index"}},[e.slide.length?s("div",{ref:"sliderWrapper",staticClass:"slider-wrapper"},[s("slider",e._l(e.slide,function(t,i){return s("div",{key:i,staticClass:"slider-item"},[s("a",{staticClass:"slider-pic",attrs:{href:t.url}},[s("img",{attrs:{src:t.thumb},on:{load:e.loadImage}})]),e._v(" "),s("p",{staticClass:"slider-info"},[e._v(e._s(t.title))])])}))],1):e._e(),e._v(" "),e.newsNav.length?s("div",{ref:"navWrapper",staticClass:"news-nav"},[s("scroll",{ref:"navScroll",attrs:{data:e.newsNav,scrollX:e.scrollX,scrollY:e.scrollY,eventPassthrough:e.eventPassthrough}},[s("div",{ref:"navContent",staticClass:"nav-content"},e._l(e.newsNav,function(t,i){return s("div",{key:i,ref:"navBtn",refInFor:!0,staticClass:"nav-btn",on:{click:function(t){e.change(i)}}},[s("span",{class:{"nav-s":e.type===i}},[e._v(e._s(t.name))])])})),e._v(" "),s("div",{staticClass:"nav-more-btn",on:{click:e.showMoreTab}})])],1):e._e(),e._v(" "),s("div",{ref:"newsMark",staticStyle:{"font-size":"0","line-height":"0"}}),e._v(" "),s("scroll",{ref:"newsWrapper",staticClass:"news-wrapper",attrs:{data:e.news,probeType:e.probeType,pullUpLoad:e.pullUpLoad,pullDownRefresh:e.pullDownRefresh},on:{scroll:e.scroll,touchToEnd:e.touchToEnd,scrollToTop:e.scrollToTop,pullingDown:e.pullingDown}},[s("div",{staticClass:"news-content"},[e._l(e.newsNav,function(t,i){return s("news-column",{directives:[{name:"show",rawName:"v-show",value:e.type===i,expression:"type===index"}],key:i,attrs:{news:e.news}})}),e._v(" "),e.news.length?s("load-tips",{attrs:{tips:e.tips,isLoad:e.isLoad}}):e._e(),e._v(" "),s("load-tips",{staticClass:"pulldown-tips",attrs:{tips:e.downTips}})],2)]),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:!e.news.length,expression:"!news.length"}],attrs:{title:""}}),e._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isMoreTab,expression:"isMoreTab"}],staticClass:"nav-more-wrapper"},[s("div",[s("h1",{staticClass:"title"},[e._v("更多栏目")]),e._v(" "),s("div",{staticClass:"content"},e._l(e.newsNav,function(t,i){return s("span",{key:i,staticClass:"item",on:{click:function(t){e.change(i)}}},[e._v(e._s(t.name))])}))]),e._v(" "),s("div",{staticClass:"close",on:{click:e.hideMoreTab}})])])],1)},staticRenderFns:[]};var g=s("D8HT")(v,w,!1,function(e){s("QxQd")},null,null);t.default=g.exports},QxQd:function(e,t){},i4uI:function(e,t){}});
//# sourceMappingURL=3.4aaa2e4162a5778c6b3b.js.map