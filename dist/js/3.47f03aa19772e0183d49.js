webpackJsonp([3],{B9ZT:function(t,e){},Qt9A:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("ah2Q");function n(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)}function r(t,e){if(!n(t,e)){var s=t.className.split(" ");s.push(e),t.className=s.join(" ")}}var a={data:function(){return{dots:[],currentPageIndex:0}},props:{loop:{type:Boolean,default:!0},autoPlay:{type:Boolean,default:!0},interval:{type:Number,default:4e3}},mounted:function(){var t=this;setTimeout(function(){t._setSliderWidth(),t.dots=new Array(t.children.length),t._initSlider(),t.autoPlay&&t._play()},20),window.addEventListener("resize",function(){t.slider&&(t._setSliderWidth(!0),t.slider.refresh())})},destroyed:function(){clearTimeout(this.timer)},methods:{_setSliderWidth:function(t){this.children=this.$refs.sliderGroup.children;for(var e=0,s=this.$refs.slider.clientWidth,i=0;i<this.children.length;i++){var n=this.children[i];r(n,"slider-item"),n.style.width=s+"px",e+=s}this.loop&&!t&&(e+=2*s),this.$refs.sliderGroup.style.width=e+"px"},_initSlider:function(){var t=this;this.slider=new i.a(this.$refs.slider,{click:!0,scrollX:!0,scrollY:!1,eventPassthrough:"vertical",momentum:!1,snap:{loop:!0,threshold:.3,speed:500}}),this.slider.on("scrollEnd",function(){var e=t.slider.getCurrentPage().pageX;t.currentPageIndex=e,t.autoPlay&&(clearTimeout(t.timer),t._play())}),this.slider.on("scrollStart",function(){clearTimeout(t.timer)})},_play:function(){var t=this,e=this.currentPageIndex;return this.loop&&(e+=1),this.timer=setTimeout(function(){t.slider.next(500)},this.interval),e}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"slider",staticClass:"slider"},[e("div",{ref:"sliderGroup",staticClass:"slider-group"},[this._t("default")],2)])},staticRenderFns:[]};var o=s("D8HT")(a,l,!1,function(t){s("B9ZT")},null,null).exports,c=s("bh5B"),h=s("A2FV"),d=s("tL1G"),p=s("qqiS"),u=s("/gb8"),f=s("dyDs"),v=s("Kf/3"),w={data:function(){return{slide:[],scrollH:0,news:[],newsNav:[],type:0,page:0,tips:"上滑加载更多",downTips:"下拉刷新",isShow:!0,isLoad:null,isMoreTab:null,shareVal:{title:document.title,summary:"赛恩财经，提供全球股票、外汇、期货、债券、基金和数字货币等数十万种金融投资产品的实时行情和新闻资讯以及多种投资工具。",thumb:"https://cnibd.oss-cn-beijing.aliyuncs.com/resource/images/sharelogo.png"}}},created:function(){window.history.length<=1&&(Object(v.n)(),Object(v.m)()),this.scrollX=!0,this.scrollY=!1,this.eventPassthrough="vertical",this.probeType=3,this.pullUpLoad=!0,this.pullDownRefresh=!0,this.listenScrollEnd=!0,this._getSlider(),this._getNewsNav()},mounted:function(){Object(f.a)(this.shareVal)},methods:{loadImage:function(){this.checkLoaded||(this.$refs.newsWrapper.refresh(),this.firstGetNews(),this.checkLoaded=!0)},_getSlider:function(){var t=this;Object(u.a)("/slide").then(function(e){0===e.data.errorCode?t.slide=e.data.data:t.slide=[]})},_getNewsNav:function(){var t=this;Object(u.a)("/categories").then(function(e){0===e.data.errorCode&&(t.newsNav=e.data.data,t.$nextTick(function(){for(var e=0,s=0;s<t.newsNav.length;s++)e+=t.$refs.navBtn[s].getBoundingClientRect().width;t.$refs.navContent.style.width=e+"px"}))})},_getNews:function(){var t=this;Object(u.a)("/list?page=0&type="+this.type).then(function(e){0===e.data.errorCode?(t.news=e.data.data,t.$nextTick(function(){t.navHeight=t.$refs.navWrapper.getBoundingClientRect().height||t.$refs.navWrapper.clientHeight,t.topHeight=t.$refs.newsMark.getBoundingClientRect().top,t.minTranslateY=t.navHeight-t.topHeight,t.$refs.newsWrapper.$el.style.top=t.topHeight+"px",t.$refs.newsWrapper.scrollTo(0,Object(v.i)(),20)})):(t.news=[],t.tips="暂无数据")}).catch(function(e){e.res||(t.news=[],t.tips="网络不给力，请稍后重试")})},firstGetNews:function(){var t=this;this.news=Object(v.h)(),0!==Object(v.k)().length&&(this.type=Object(v.k)()),0===this.news.length?this._getNews():this.$nextTick(function(){t.navHeight=t.$refs.navWrapper.clientHeight,t.topHeight=t.$refs.newsMark.getBoundingClientRect().top,t.minTranslateY=t.navHeight-t.topHeight,t.$refs.newsWrapper.$el.style.top=t.topHeight+"px",t.$refs.newsWrapper.scrollTo(0,Object(v.i)(),20)})},loadMore:function(){var t=this;this.tips="加载中...",this.isLoad=!0,this.page++,Object(u.a)("/list?page="+this.page+"&type="+this.type).then(function(e){t.isLoad=!1,0===e.data.errorCode?(t.news=t.news.concat(e.data.data),Object(v.r)(t.news),t.tips="上滑加载更多"):t.tips="没有更多数据了~"}).catch(function(e){e.res||(t.isLoad=!1,t.tips="网络不给力，请稍后重试")})},change:function(t){this.type=t,Object(v.u)(t),this.page=0,this.isMoreTab=!1,this.scrollCenter(t),Object(v.l)(),this._getNews(),this.scrollTop()},scroll:function(t){this.scrollH=t.y},scrollEnd:function(t){Object(v.s)(t.y)},scrollCenter:function(t){this.$refs.navScroll.scrollToElement(this.$refs.navBtn[t],300,!0,!0),this.$refs.navScroll.refresh()},scrollTop:function(){this.$refs.newsWrapper.scrollTo(0,this.minTranslateY,20)},touchToEnd:function(){this.loadMore()},scrollToTop:function(){this.downTips="松开刷新"},pullingDown:function(){var t=this;this.news=[],this.downTips="正在刷新",setTimeout(function(){t._getNews(),t.downTips="下拉刷新"},400)},showMoreTab:function(){this.isMoreTab=!0},hideMoreTab:function(){this.isMoreTab=!1}},watch:{type:function(t){},scrollH:function(t){if(t<=0){var e=Math.max(this.minTranslateY,t);this.$refs.navWrapper.style.transform="translate3d(0, "+e+"px, 0)"}}},components:{"news-column":h.a,"load-tips":d.a,loading:p.a,slider:o,scroll:c.a}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"index"}},[t.slide.length?s("div",{ref:"sliderWrapper",staticClass:"slider-wrapper"},[s("slider",t._l(t.slide,function(e,i){return s("div",{key:i,staticClass:"slider-item"},[s("a",{staticClass:"slider-pic",attrs:{href:e.url}},[s("img",{attrs:{src:e.thumb},on:{load:t.loadImage}})]),t._v(" "),s("p",{staticClass:"slider-info"},[t._v(t._s(e.title))])])}))],1):t._e(),t._v(" "),t.newsNav.length?s("div",{ref:"navWrapper",staticClass:"news-nav"},[s("scroll",{ref:"navScroll",attrs:{data:t.newsNav,scrollX:t.scrollX,scrollY:t.scrollY,eventPassthrough:t.eventPassthrough}},[s("div",{ref:"navContent",staticClass:"nav-content"},t._l(t.newsNav,function(e,i){return s("div",{key:i,ref:"navBtn",refInFor:!0,staticClass:"nav-btn",on:{click:function(e){t.change(i)}}},[s("span",{class:{"nav-s":t.type===i}},[t._v(t._s(e.name))])])})),t._v(" "),s("div",{staticClass:"nav-more-btn",on:{click:t.showMoreTab}},[s("i",{staticClass:"icon-more"})])])],1):t._e(),t._v(" "),s("div",{ref:"newsMark",staticStyle:{"font-size":"0","line-height":"0"}}),t._v(" "),s("scroll",{ref:"newsWrapper",staticClass:"news-wrapper",attrs:{data:t.news,probeType:t.probeType,listenScrollEnd:t.listenScrollEnd,pullUpLoad:t.pullUpLoad,pullDownRefresh:t.pullDownRefresh},on:{scroll:t.scroll,"scroll-end":t.scrollEnd,touchToEnd:t.touchToEnd,scrollToTop:t.scrollToTop,pullingDown:t.pullingDown}},[s("div",{staticClass:"news-content"},[s("news-column",{attrs:{news:t.news}}),t._v(" "),t.news.length?s("load-tips",{attrs:{tips:t.tips,isLoad:t.isLoad}}):t._e(),t._v(" "),s("load-tips",{staticClass:"pulldown-tips",attrs:{tips:t.downTips}})],1)]),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:!t.news.length,expression:"!news.length"}],staticClass:"loading-container",attrs:{title:""}}),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isMoreTab,expression:"isMoreTab"}],staticClass:"nav-more-wrapper"},[s("div",[s("h1",{staticClass:"title"},[t._v("更多栏目")]),t._v(" "),s("div",{staticClass:"content"},t._l(t.newsNav,function(e,i){return s("span",{key:i,staticClass:"item",on:{click:function(e){t.change(i)}}},[t._v(t._s(e.name))])}))]),t._v(" "),s("div",{staticClass:"close",on:{click:t.hideMoreTab}},[s("i",{staticClass:"icon-delete"})])])])],1)},staticRenderFns:[]};var m=s("D8HT")(w,g,!1,function(t){s("l2O5")},null,null);e.default=m.exports},l2O5:function(t,e){}});
//# sourceMappingURL=3.47f03aa19772e0183d49.js.map