webpackJsonp([12],{oEPZ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("34v0"),o=s.n(i),r=s("qqiS"),a=s("/gb8"),c=s("EcfS"),n=s("dyDs"),l={data:function(){return{errors:[],tel:"",password:"",code:"",mobileCode:"",isTel:null,isPsw:null,isCode:null,isMobileCode:null,captchaImage:"",isClick:!1,isSendCode:!1,isCorrect:null,sendText:"发送验证码",count:"",shareVal:{title:document.title,summary:"赛恩财经，提供全球股票、外汇、期货、债券、基金和数字货币等数十万种金融投资产品的实时行情和新闻资讯以及多种投资工具。",thumb:"https://cnibd.oss-cn-beijing.aliyuncs.com/resource/images/sharelogo.png"}}},mounted:function(){Object(n.a)(this.shareVal)},computed:o()({},Object(c.c)(["loginState"])),created:function(){this.loginState&&"0"===this.loginState.errorCode?this.$router.back():this.getCode()},methods:o()({register:function(){this.checkForm(),this.checkForm()&&this.toRegister()},toRegister:function(){var e=this,t={captchaCodeKey:this.captchaCodeKey,captchaCode:this.code,mobileNumber:this.tel,mobileCode:this.mobileCode,password:this.password};Object(a.b)("user.retrievePassword",t).then(function(t){"0"===t.data.errorCode?(alert("密码重置成功！"),e.saveLoginState(t.data),e.$router.push({path:"/index"})):(e.errors.push(t.data.errorMessage),e.isCorrect=!1)}).catch(function(e){console.log(e)})},checkSendCode:function(){var e=this;this.isTel=!1,this.isCode=!1,this.tel?this.validTel(this.tel)||(this.errors.push("请输入正确的手机号码"),this.isTel=!0):(this.errors.push("请输入手机号码"),this.isTel=!0),this.code||(this.errors.push("请输入验证码"),this.isCode=!0),setTimeout(function(){e.errors=[]},4e3)},checkLastInfo:function(){this.isMobileCode=!1,this.isPsw=!1,this.mobileCode||(this.errors.push("请输入短信验证码"),this.isMobileCode=!0),this.password?(this.password.length<6||this.password.length>18)&&(this.errors.push("请设置6~18位密码"),this.isPsw=!0):(this.errors.push("请输入密码"),this.isPsw=!0)},checkForm:function(){return this.checkSendCode(),this.checkLastInfo(),!this.errors.length},validTel:function(e){return/^[0-9]{11}$/.test(e)},clearTel:function(){this.tel=""},close:function(){this.$router.push({path:"/index"})},getCode:function(){var e=this;Object(a.b)("user.getCaptcha").then(function(t){"0"===t.data.errorCode&&(e.captchaImage=t.data.data.captchaImage,e.captchaCodeKey=t.data.data.captchaCodeKey)}).catch(function(e){console.log(e)})},refreshCode:function(){this.getCode()},getMobileCode:function(){var e=this;this.isClick=!0,this.checkSendCode();var t={captchaCodeKey:this.captchaCodeKey,captchaCode:this.code,mobileNumber:this.tel,usage:2};Object(a.b)("user.getMobileCode",t).then(function(t){e.isClick=!1,"0"===t.data.errorCode?(e.isSendCode=!0,e.errors.push(t.data.errorMessage),e.isCorrect=!0,e.timer||(e.count=60,e.isSendCode=!0,e.timer=setInterval(function(){e.count>0&&e.count<=60?e.count--:(e.isSendCode=!1,clearInterval(e.timer),e.timer=null,e.sendText="重新发送")},1e3))):(e.errors.push(t.data.errorMessage),e.isCorrect=!1,e.getCode())}).catch(function(e){console.log(e)})}},Object(c.b)(["saveLoginState"])),components:{loading:r.a}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"register"},[s("header",{staticClass:"register-header"},[s("span",{staticClass:"title"},[e._v("找回密码")]),e._v(" "),s("div",{staticClass:"btn-close",on:{click:e.close}},[s("i",{staticClass:"icon-close"})])]),e._v(" "),s("form",{staticClass:"register-form"},[s("div",{staticClass:"register-content"},[s("div",{staticClass:"input-wrapper",class:{"error-input":e.isTel}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.tel,expression:"tel"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.tel},on:{input:function(t){t.target.composing||(e.tel=t.target.value)}}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.tel,expression:"tel"}],staticClass:"icon-dismiss",on:{click:e.clearTel}})]),e._v(" "),s("div",{staticClass:"input-wrapper",class:{"error-input":e.isCode}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),s("div",{staticClass:"captchaImage",on:{click:e.refreshCode}},[s("img",{attrs:{src:e.captchaImage}})])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.tel&&e.code,expression:"tel && code"}],staticClass:"input-wrapper",class:{"error-input":e.isMobileCode}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.mobileCode,expression:"mobileCode"}],attrs:{type:"text",placeholder:"请输入短信验证码"},domProps:{value:e.mobileCode},on:{input:function(t){t.target.composing||(e.mobileCode=t.target.value)}}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isSendCode&&!e.isClick,expression:"!isSendCode && !isClick"}],staticClass:"send-code",on:{click:e.getMobileCode}},[e._v(e._s(e.sendText))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isClick,expression:"isClick"}],staticClass:"send-code"},[s("loading",{attrs:{title:""}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isSendCode,expression:"isSendCode"}],staticClass:"send-code send-code-c"},[e._v(e._s(e.count)+"s")])]),e._v(" "),s("div",{staticClass:"input-wrapper",class:{"error-input":e.isPsw}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入新密码"},domProps:{value:e.password},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.register(t):null},input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"submit",on:{click:e.register}},[e._v("确认修改")]),e._v(" "),s("transition",{attrs:{name:"error"}},[e.errors.length?s("div",{ref:"errorWrapper",staticClass:"error-wrapper"},e._l(e.errors,function(t,i){return 0==i?s("p",{key:i,staticClass:"error-text",class:{"correct-text":e.isCorrect}},[e._v(e._s(t))]):e._e()})):e._e()])],1)])},staticRenderFns:[]};var h=s("D8HT")(l,d,!1,function(e){s("wqxn")},null,null);t.default=h.exports},wqxn:function(e,t){}});
//# sourceMappingURL=12.314d43f6459edffdc510.js.map