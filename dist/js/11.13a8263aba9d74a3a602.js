webpackJsonp([11],{"2e9v":function(e,t){},QlWu:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("34v0"),r=s.n(i),o=s("/gb8"),n=s("EcfS"),a=s("dyDs"),c={data:function(){return{errors:[],tel:"",password:"",isTel:!1,isPsw:!1,shareVal:{title:document.title,summary:"赛恩财经，提供全球股票、外汇、期货、债券、基金和数字货币等数十万种金融投资产品的实时行情和新闻资讯以及多种投资工具。",thumb:"https://cnibd.oss-cn-beijing.aliyuncs.com/resource/images/sharelogo.png"}}},mounted:function(){Object(a.a)(this.shareVal)},computed:r()({},Object(n.c)(["loginState"])),created:function(){this.loginState&&"0"===this.loginState.errorCode&&this.$router.back(),this.isWeiXin()},methods:r()({isWeiXin:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},login:function(){this.checkForm(),this.checkForm()&&this.toLogin()},toLogin:function(){var e=this,t={mobileNumber:this.tel,password:this.password};Object(o.b)("user.login",t).then(function(t){if("0"===t.data.errorCode){if(console.log(t),e.errors.push("成功登陆！"),e.saveLoginState(t.data),window.history.length<=1)return e.$router.push({path:"/index"}),!1;e.$router.back()}else e.errors.push(t.data.errorMessage)}).catch(function(e){console.log(e)})},checkForm:function(){var e=this;return this.isTel=!1,this.isPsw=!1,this.tel?this.validTel(this.tel)||(this.errors.push("请输入正确的手机号码"),this.isTel=!0):(this.errors.push("请输入手机号码"),this.isTel=!0),this.password||(this.errors.push("请输入密码"),this.isPsw=!0),!this.errors.length||(setTimeout(function(){e.errors=[]},4e3),!1)},validTel:function(e){return/^[0-9]{11}$/.test(e)},clearTel:function(){this.tel=""},close:function(){this.$router.push({path:"/index"})}},Object(n.b)(["saveLoginState"]),{wxLogin:function(){var e=encodeURIComponent("https://www.cnibd.com/wx-login");this.isWeiXin()?window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx70d395942c321a44&redirect_uri="+e+"&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect":window.location.href="https://open.weixin.qq.com/connect/qrconnect?appid=wx70d395942c321a44&redirect_uri="+e+"&response_type=code&scope=snsapi_login&state=STATE#wechat_redirect"}})},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"login-wrapper"},[s("header",{staticClass:"login-header"},[s("span",{staticClass:"title"},[e._v("登 录")]),e._v(" "),s("div",{staticClass:"btn-close",on:{click:e.close}},[s("i",{staticClass:"icon-close"})])]),e._v(" "),s("form",{staticClass:"login-form",on:{submit:e.checkForm}},[s("div",{staticClass:"login-content"},[s("div",{staticClass:"input-wrapper",class:{"error-input":e.isTel}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.tel,expression:"tel"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.tel},on:{input:function(t){t.target.composing||(e.tel=t.target.value)}}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.tel,expression:"tel"}],staticClass:"icon-dismiss",on:{click:e.clearTel}})]),e._v(" "),s("div",{staticClass:"input-wrapper",class:{"error-input":e.isPsw}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.password},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null},input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"submit",on:{click:e.login}},[e._v("登录")]),e._v(" "),s("div",{staticClass:"login-tips"},[s("router-link",{attrs:{to:"/register",tag:"span"}},[e._v("立即注册")]),e._v(" "),s("router-link",{attrs:{to:"/forget",tag:"span"}},[e._v("忘记密码")])],1),e._v(" "),s("transition",{attrs:{name:"error"}},[e.errors.length?s("div",{ref:"errorWrapper",staticClass:"error-wrapper"},e._l(e.errors,function(t,i){return 0==i?s("p",{key:i,staticClass:"error-text"},[e._v(e._s(t))]):e._e()})):e._e()])],1)]),e._v(" "),s("div",{staticClass:"login-wx"},[s("i",{staticClass:"icon-weixin",on:{click:e.wxLogin}}),e._v(" "),s("p",[e._v("微信登录")])])])},staticRenderFns:[]};var u=s("D8HT")(c,l,!1,function(e){s("2e9v")},null,null);t.default=u.exports}});
//# sourceMappingURL=11.13a8263aba9d74a3a602.js.map