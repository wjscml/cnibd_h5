{"version":3,"sources":["webpack:///src/pages/columnist-author/columnist-author.vue","webpack:///./src/pages/columnist-author/columnist-author.vue?fdd4","webpack:///./src/pages/columnist-author/columnist-author.vue"],"names":["columnist_author","data","news","authorInfo","page","tips","isLoad","scrollY","isScrollTop","shareVal","components","news-column","news_column","load-tips","load_tips","scroll","scroll_scroll","computed","extends_default","Object","vuex_esm","mounted","created","this","direction","probeType","listenScroll","pullUpLoad","_getAuthor","methods","loadTop","$refs","list","refresh","_this","getApi","$route","params","id","then","res","errorCode","userInfo","$nextTick","topHeight","top","clientHeight","barHeight","bar","minTranslateY","$el","style","publishArticles","title","nickname","summary","description","thumb","avatar","share","author","catch","error","loadMore","_this2","concat","back","window","history","length","$router","push","path","pos","y","touchToEnd","watch","newY","translateY","Math","max","layer","scale","percent","abs","bgImage","newHeight","columnist_author_columnist_author","render","_vm","_h","$createElement","_c","_self","attrs","name","directives","rawName","value","expression","staticClass","ref","src","on","load","_v","class","vip","is_certificate","_s","click","icon-back-black","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"js/9.d7113c6d6fd687d75252.js","sourcesContent":["<template>\n  <transition name=\"slide\">\n    <div class=\"columnist-author\" v-wechat-title=\"authorInfo.nickname\">\n      <div class=\"top-wrapper\" ref=\"top\">\n        <div class=\"avatar\">\n          <img class=\"image\" :src=\"authorInfo.avatar\" @load=\"loadTop\">\n          <i :class=\"{'vip': authorInfo.is_certificate === 1}\"></i>\n        </div>\n        <div class=\"text\">\n          <h1 class=\"name\">{{authorInfo.nickname}}</h1>\n          <p class=\"intro\">{{authorInfo.description}}</p>\n        </div>\n        <div class=\"back\" @click=\"back\" ref=\"bar\">\n          <i class=\"icon-back\" :class=\"{'icon-back-black': isScrollTop}\"></i>\n        </div>\n        <div class=\"title\" v-show=\"isScrollTop\">{{authorInfo.nickname}}</div>\n        <div class=\"background\" ref=\"bgImage\">\n          <img :src=\"authorInfo.avatar\">\n        </div>\n      </div>\n      <div class=\"bg-layer\" ref=\"layer\"></div>\n      <scroll @scroll=\"scroll\" @touchToEnd=\"touchToEnd\" :data=\"news\" :pullUpLoad=\"pullUpLoad\" :probeType=\"probeType\" :listenScroll=\"listenScroll\" class=\"list\" ref=\"list\">\n        <div>\n          <news-column :news=\"news\" class=\"news-column\"></news-column>\n          <load-tips v-if=\"news.length\" :tips=\"tips\" :isLoad=\"isLoad\"></load-tips>\n        </div>\n      </scroll>\n\n    </div>\n  </transition>\n</template>\n\n<script>\nimport Scroll from '../../components/scroll/scroll.vue'\nimport NewsColumn from '../../components/news-column/news-column.vue'\nimport LoadTips from '../../components/load-tips/load-tips.vue'\nimport {getApi} from '../../api/getApi.js'\nimport {mapGetters} from 'vuex'\nimport {share} from '../../common/js/share.js'\n\nconst ERR_OK = 0\nexport default {\n  data () {\n    return {\n      news: [],\n      authorInfo: [],\n      page: 0,\n      tips: '上滑加载更多',\n      isLoad: null,\n      scrollY: 0,\n      isScrollTop: null,\n      shareVal: {}\n    }\n  },\n  components: {\n    'news-column': NewsColumn,\n    'load-tips': LoadTips,\n    'scroll': Scroll\n  },\n  computed: {\n    ...mapGetters([\n      'author'\n    ])\n  },\n  mounted () {\n  },\n  created () {\n    this.direction = 'horizontal'\n    this.probeType = 3\n    this.listenScroll = true\n    this.pullUpLoad = true\n    this._getAuthor()\n  },\n  methods: {\n    loadTop () {\n      this.$refs.list.refresh()\n    },\n    _getAuthor () {\n      getApi(`/author-publish?page=0&author_id=${this.$route.params.id}`).then(res => {\n        if (res.data.errorCode === ERR_OK) {\n          this.authorInfo = res.data.data.userInfo\n          this.$nextTick(() => {\n            this.topHeight = this.$refs.top.clientHeight\n            this.barHeight = this.$refs.bar.clientHeight\n            this.minTranslateY = this.barHeight - this.topHeight\n            this.$refs.list.$el.style.top = `${this.topHeight}px`\n          })\n          this.news = res.data.data.publishArticles\n\n          this.shareVal.title = this.authorInfo.nickname\n          this.shareVal.summary = this.authorInfo.description\n          this.shareVal.thumb = this.authorInfo.avatar\n          share(this.shareVal)\n        } else {\n          this.authorInfo = this.author\n          this.tips = '暂未发表文章'\n        }\n      }).catch(error => {\n        if (!error.res) {\n          this.tips = '网络不给力，请稍后重试'\n        }\n      })\n    },\n    loadMore () {\n      this.tips = '正在加载...'\n      this.isLoad = true\n      this.page++\n      getApi(`/author-publish?page=${this.page}&author_id=${this.$route.params.id}`).then(res => {\n        if (res.data.errorCode === ERR_OK) {\n          this.news = this.news.concat(res.data.data.publishArticles)\n          this.tips = '上滑加载更多'\n          this.isLoad = false\n        } else {\n          this.tips = '没有更多数据了~'\n          this.isLoad = false\n        }\n      }).catch(error => {\n        if (!error.res) {\n          this.tips = '网络不给力，请稍后重试'\n        }\n      })\n    },\n    back () {\n      if (window.history.length <= 1) {\n        this.$router.push({path: '/columnist'})\n        return false\n      } else {\n        this.$router.back()\n      }\n    },\n    scroll (pos) {\n      this.scrollY = pos.y\n    },\n    touchToEnd () {\n      this.loadMore()\n    }\n  },\n  watch: {\n    scrollY (newY) {\n      let translateY = Math.max(this.minTranslateY, newY)\n      this.$refs.layer.style['transform'] = `translate3d(0, ${translateY}px, 0)`\n      if (newY > this.minTranslateY) {\n        this.isScrollTop = false\n      } else {\n        this.isScrollTop = true\n      }\n\n      let scale = 1\n      const percent = Math.abs(newY / this.topHeight)\n      if (newY > 0) {\n        scale = 1 + percent\n      }\n      this.$refs.bgImage.style['transform'] = `scale(${scale})`\n      let newHeight = this.topHeight * scale\n      this.$refs.top.style['height'] = `${newHeight}px`\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n@import \"../../common/stylus/mixin.styl\"\n.columnist-author\n  position fixed\n  top 0\n  bottom 0\n  left 0\n  right 0\n  background-color #fff\n  .top-wrapper\n    position relative\n    overflow hidden\n    box-sizing border-box\n    padding 1.4rem 2rem\n    background-color rgba(7,17,27,0.4)\n    .avatar\n      position relative\n      width 7rem\n      height 7rem\n      margin 0 auto\n      padding 0.4rem\n      border 0.1rem solid #e0e0e0\n      border-radius 50%\n      background-color #f5f5f5\n      .image\n        width 7rem\n        height 7rem\n        border-radius 50%\n      .vip\n        position absolute\n        right 0\n        bottom 0\n        background-image url(../../common/image/vip-steps.png)\n    .text\n      padding 1.5rem 2rem 0\n      text-align center\n      color #fff\n      .name\n        margin-bottom 1rem\n        line-height 1.8rem\n        font-size 1.8rem\n        font-weight 600\n      .intro\n        line-height 1.8rem\n        font-size 1.2rem\n    .back\n      position absolute\n      top 0\n      left 0\n      z-index 50\n      padding 1rem 1rem 1rem 2rem\n      width 3rem\n      height 3rem\n      line-height 0\n      .icon-back\n        line-height 3rem\n        font-size 2.4rem\n        color #fff\n      .icon-back-black\n        color #393a4c\n    .title\n      border-1px(rgba(7,17,27,0.1))\n      position absolute\n      top 0\n      left 0\n      width 100%\n      height 5rem\n      line-height 5rem\n      font-size 1.8rem\n      text-align center\n      color #393a4c\n      background-color #fff\n      z-index 49\n    .background\n      position absolute\n      top 0\n      left 0\n      width 100%\n      height 100%\n      z-index -1\n      filter blur(10px)\n      img\n        width 100%\n        height 100%\n  .bg-layer\n    position relative\n    height 70%\n    background-color #fff\n  .list\n    position fixed\n    top 0\n    bottom 0\n    width 100%\n    margin-top 1rem\n    .news-column\n      padding 0 2rem\n      background-color #fff\n.slide-enter-active,.slide-leave-active\n  transition all .3s\n.slide-enter,.slide-leave-active\n  transform translate3d(100%, 0, 0)\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/columnist-author/columnist-author.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('div',{directives:[{name:\"wechat-title\",rawName:\"v-wechat-title\",value:(_vm.authorInfo.nickname),expression:\"authorInfo.nickname\"}],staticClass:\"columnist-author\"},[_c('div',{ref:\"top\",staticClass:\"top-wrapper\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{staticClass:\"image\",attrs:{\"src\":_vm.authorInfo.avatar},on:{\"load\":_vm.loadTop}}),_vm._v(\" \"),_c('i',{class:{'vip': _vm.authorInfo.is_certificate === 1}})]),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_c('h1',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.authorInfo.nickname))]),_vm._v(\" \"),_c('p',{staticClass:\"intro\"},[_vm._v(_vm._s(_vm.authorInfo.description))])]),_vm._v(\" \"),_c('div',{ref:\"bar\",staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\",class:{'icon-back-black': _vm.isScrollTop}})]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isScrollTop),expression:\"isScrollTop\"}],staticClass:\"title\"},[_vm._v(_vm._s(_vm.authorInfo.nickname))]),_vm._v(\" \"),_c('div',{ref:\"bgImage\",staticClass:\"background\"},[_c('img',{attrs:{\"src\":_vm.authorInfo.avatar}})])]),_vm._v(\" \"),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_vm._v(\" \"),_c('scroll',{ref:\"list\",staticClass:\"list\",attrs:{\"data\":_vm.news,\"pullUpLoad\":_vm.pullUpLoad,\"probeType\":_vm.probeType,\"listenScroll\":_vm.listenScroll},on:{\"scroll\":_vm.scroll,\"touchToEnd\":_vm.touchToEnd}},[_c('div',[_c('news-column',{staticClass:\"news-column\",attrs:{\"news\":_vm.news}}),_vm._v(\" \"),(_vm.news.length)?_c('load-tips',{attrs:{\"tips\":_vm.tips,\"isLoad\":_vm.isLoad}}):_vm._e()],1)])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-2e1ebc99\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/pages/columnist-author/columnist-author.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2e1ebc99\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=styles&index=0!./columnist-author.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=script&index=0!./columnist-author.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=script&index=0!./columnist-author.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e1ebc99\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.13.7.2@vue-loader/lib/selector?type=template&index=0!./columnist-author.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/columnist-author/columnist-author.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}