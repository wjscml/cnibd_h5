webpackJsonp([4],{QJr3:function(t,s){},UmzE:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("34v0"),a=i.n(e),n=i("bh5B"),o=i("h2NJ"),r={props:{switches:{},currentIndex:{type:Number,default:0}},methods:{switchItem:function(t){this.$emit("switch",t)}}},c={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"switches"},[i("div",{staticClass:"switch-content"},t._l(t.switches,function(s,e){return i("div",{key:e,staticClass:"switch-item",class:{active:t.currentIndex===e},on:{click:function(s){t.switchItem(e)}}},[i("span",[t._v(t._s(s.name))])])}))])},staticRenderFns:[]};var l=i("D8HT")(r,c,!1,function(t){i("QJr3")},null,null).exports,u=i("tL1G"),d=i("/gb8"),h=i("EcfS"),v=i("dyDs"),f={data:function(){return{favoriteList:[],favoriteColumnist:[],currentIndex:0,switches:[{name:"作者"},{name:"文章"}],currentNews:[],currentAuthor:[],confirmText:"",page:0,tips:"上滑加载更多",isLoad:null,shareVal:{title:document.title,summary:"赛恩财经，提供全球股票、外汇、期货、债券、基金和数字货币等数十万种金融投资产品的实时行情和新闻资讯以及多种投资工具。",thumb:"https://cnibd.oss-cn-beijing.aliyuncs.com/resource/images/sharelogo.png"}}},mounted:function(){Object(v.a)(this.shareVal)},computed:a()({noResult:function(){return 1===this.currentIndex?!this.favoriteList.length:!this.favoriteColumnist.length},noResultDesc:function(){return 1===this.currentIndex?"暂无收藏文章":"暂无收藏作者"}},Object(h.c)(["loginState"])),created:function(){this.loginState&&"0"===this.loginState.errorCode?(this.getFavoriteArticle(),this.getFavoriteColumnist(),this.pullUpLoad=!0):(this.$router.push("/login"),alert("请先登录"))},methods:{getFavoriteArticle:function(){var t=this;Object(d.b)("article.getKeepList",{session:this.loginState.data.session,page:0}).then(function(s){"0"===s.data.errorCode&&(t.favoriteList=s.data.data.publishArticles)})},getFavoriteColumnist:function(){var t=this;Object(d.b)("user.getFollowAuthorList",{session:this.loginState.data.session,page:0}).then(function(s){"0"===s.data.errorCode&&(t.favoriteColumnist=s.data.data)})},loadMore:function(){var t=this;this.tips="加载中...",this.isLoad=!0,this.page++,1===this.currentIndex&&Object(d.b)("article.getKeepList",{session:this.loginState.data.data.session,page:this.page}).then(function(s){t.isLoad=!1,"0"===s.data.errorCode?(t.favoriteList=t.favoriteList.concat(s.data.data.publishArticles),t.tips="上滑加载更多"):t.tips="没有更多数据了~"}).catch(function(s){s.res||(t.isLoad=!1,t.tips="网络不给力，请稍后重试")}),0===this.currentIndex&&Object(d.b)("user.getFollowAuthorList",{session:this.loginState.data.data.session,page:this.page}).then(function(s){t.isLoad=!1,"0"===s.data.errorCode?(t.favoriteColumnist=t.favoriteColumnist.concat(s.data.data),t.tips="上滑加载更多"):t.tips="没有更多数据了~"}).catch(function(s){s.res||(t.isLoad=!1,t.tips="网络不给力，请稍后重试")})},switchItem:function(t){this.currentIndex=t},showConfirm:function(t,s){this.$refs.confirm.show(),1===this.currentIndex&&(this.currentNews=t,this.confirmText="是否不再收藏此文章",this.articleId=t.id,this.n=s),0===this.currentIndex&&(this.currentAuthor=t,this.confirmText='是否不再收藏 "'+t.nickname+'"',this.followUserId=t.author_id,this.n=s)},deleteFavorite:function(){var t=this;1===this.currentIndex&&Object(d.b)("article.keep",{session:this.loginState.data.data.session,articleId:this.articleId}).then(function(s){t.favoriteList=t.favoriteList.slice(0,t.n).concat(t.favoriteList.slice(t.n+1))}),0===this.currentIndex&&Object(d.b)("user.follow",{session:this.loginState.data.data.session,followUserId:this.followUserId}).then(function(s){t.favoriteColumnist=t.favoriteColumnist.slice(0,t.n).concat(t.favoriteColumnist.slice(t.n+1))})}},components:{switches:l,confirm:o.a,scroll:n.a,"load-tips":u.a}},m={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"favor"},[i("div",{staticClass:"switches-wrapper"},[i("switches",{attrs:{switches:t.switches,currentIndex:t.currentIndex},on:{switch:t.switchItem}})],1),t._v(" "),1===t.currentIndex?i("scroll",{staticClass:"list-wrapper",attrs:{data:t.favoriteList,pullupLoad:t.pullUpLoad},on:{touchToEnd:t.loadMore}},[i("div",{staticClass:"news-list"},[t._l(t.favoriteList,function(s,e){return i("div",{key:e,staticClass:"news-item"},[i("router-link",{staticClass:"item-text",attrs:{to:"/site/"+s.id,tag:"div"}},[i("h1",{staticClass:"title"},[t._v(t._s(s.title))]),t._v(" "),i("p",{staticClass:"author"},[t._v(t._s(s.author_name))])]),t._v(" "),i("div",{staticClass:"item-icon",on:{click:function(i){t.showConfirm(s,e)}}},[i("i",{staticClass:"icon-like"})])],1)}),t._v(" "),i("load-tips",{directives:[{name:"show",rawName:"v-show",value:t.favoriteList.length,expression:"favoriteList.length"}],attrs:{tips:t.tips,isLoad:t.isLoad}})],2)]):t._e(),t._v(" "),0===t.currentIndex?i("scroll",{staticClass:"list-wrapper",attrs:{data:t.favoriteColumnist,pullUpLoad:t.pullUpLoad},on:{touchToEnd:t.loadMore}},[i("div",{staticClass:"author-list"},[t._l(t.favoriteColumnist,function(s,e){return i("div",{key:e,staticClass:"author-item"},[i("router-link",{staticClass:"item-avatar",class:{vip:1===s.is_certificate},attrs:{to:"/columnist/"+s.author_id,tag:"div"}},[i("img",{attrs:{src:s.avatar}})]),t._v(" "),i("router-link",{staticClass:"item-text",attrs:{to:"/columnist/"+s.author_id,tag:"div"}},[i("h1",{staticClass:"name"},[t._v(t._s(s.nickname))]),t._v(" "),i("p",{staticClass:"info"},[t._v(t._s(s.description))])]),t._v(" "),i("div",{staticClass:"item-icon",on:{click:function(i){t.showConfirm(s,e)}}},[i("i",{staticClass:"icon-like"})])],1)}),t._v(" "),i("load-tips",{directives:[{name:"show",rawName:"v-show",value:t.favoriteColumnist.length,expression:"favoriteColumnist.length"}],attrs:{tips:t.tips,isLoad:t.isLoad}})],2)]):t._e(),t._v(" "),i("confirm",{ref:"confirm",attrs:{text:t.confirmText},on:{confirm:t.deleteFavorite}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.noResult,expression:"noResult"}],staticClass:"no-result-wrapper"},[i("i",{staticClass:"icon-no_result"}),t._v(" "),i("p",[t._v(t._s(t.noResultDesc))])])],1)},staticRenderFns:[]};var p=i("D8HT")(f,m,!1,function(t){i("ZQcB")},null,null);s.default=p.exports},ZQcB:function(t,s){}});
//# sourceMappingURL=4.938c4123667a83c5207a.js.map