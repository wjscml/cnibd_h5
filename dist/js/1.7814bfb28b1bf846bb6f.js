webpackJsonp([1],{GI6q:function(e,t){},NcgL:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("34v0"),r=s.n(a),i=s("bh5B"),n={props:{placeholder:{type:String,default:"搜索文章关键字"}},data:function(){return{query:""}},methods:{clear:function(){this.query=""},setQuery:function(e){this.query=e},keyupEnter:function(){this.$emit("keyupEnter")}},created:function(){var e=this;this.$watch("query",function(t,s){e.$emit("query",t,s)})}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-box"},[s("i",{staticClass:"icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"box",attrs:{placeholder:e.placeholder},domProps:{value:e.query},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.keyupEnter(t):null},input:function(t){t.target.composing||(e.query=t.target.value)}}}),e._v(" "),s("i",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],staticClass:"icon-dismiss",on:{click:e.clear}})])},staticRenderFns:[]};var c=s("D8HT")(n,o,!1,function(e){s("O5XS")},"data-v-4e0b3164",null).exports,u=s("A2FV"),l=s("tL1G"),h=s("qqiS"),d=s("/gb8"),v={data:function(){return{news:[],pullUpLoad:!0,tips:"上滑加载更多",page:0,isLoad:null,title:"正在载入...",hasGif:!0,hasMore:null}},props:{query:{type:String,default:""},ensure:{type:Boolean,default:!0}},methods:{_getNews:function(){var e=this;this.hasMore=!0,this.title="正在载入...",this.hasGif=!0;var t={keywords:this.query,page:0};Object(d.b)("article.getSearchList",t).then(function(t){"0"===t.data.errorCode?(e.hasMore=!1,e.news=t.data.data):(e.news=[],e.title="抱歉，未找到相关内容",e.hasGif=!1)}).catch(function(t){t.res||(e.news=[],e.title="网络不给力，请稍后重试")}),this.$emit("select")},searchMore:function(){var e=this;this.tips="正在加载...",this.isLoad=!0,this.page++;var t={keywords:this.query,page:this.page};Object(d.b)("article.getSearchList",t).then(function(t){e.isLoad=!1,"0"===t.data.errorCode?(e.news=e.news.concat(t.data.data),e.tips="上滑加载更多"):e.tips="没有更多数据了~"}).catch(function(t){t.res||(e.tips="网络不给力，请稍后重试")})}},watch:{query:function(e,t){""===t&&(this.news=[])},ensure:function(){this.ensure&&(this.news=[],this._getNews())}},components:{scroll:i.a,"news-column":u.a,"load-tips":l.a,loading:h.a}},y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("scroll",{staticClass:"suggest",attrs:{data:e.news,pullUpLoad:e.pullUpLoad},on:{touchToEnd:e.searchMore}},[s("div",[s("news-column",{staticClass:"suggest-list",attrs:{news:e.news}}),e._v(" "),s("load-tips",{directives:[{name:"show",rawName:"v-show",value:e.news.length>5,expression:"news.length > 5"}],staticClass:"suggest-tips",attrs:{tips:e.tips,isLoad:e.isLoad}})],1),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.hasMore,expression:"hasMore"}],attrs:{title:e.title,hasGif:e.hasGif}})],1)},staticRenderFns:[]};var f=s("D8HT")(v,y,!1,function(e){s("GI6q")},null,null).exports,p=s("h2NJ"),m=s("EcfS"),w=s("dyDs"),g={data:function(){return{hotKey:[],query:"",ensure:!1,shareVal:{title:document.title,summary:"赛恩财经，提供全球股票、外汇、期货、债券、基金和数字货币等数十万种金融投资产品的实时行情和新闻资讯以及多种投资工具。",thumb:"https://cnibd.oss-cn-beijing.aliyuncs.com/resource/images/sharelogo.png"}}},mounted:function(){Object(w.a)(this.shareVal)},created:function(){this._getHotKey()},computed:r()({shortcut:function(){return this.hotKey.concat(this.searchHistory)}},Object(m.c)(["searchHistory"])),methods:r()({addQuery:function(e){""!==e&&(this.ensure=!0,this.$refs.searchBox.setQuery(e))},onQueryChange:function(e,t){this.query=e,""!==t&&(this.ensure=!1)},saveSearch:function(){this.saveSearchHistory(this.query)},deleteOne:function(e){this.deleteSearchHistory(e)},showConfirm:function(){this.$refs.confirm.show()},_getHotKey:function(){var e=this;Object(d.a)("/categories").then(function(t){0===t.data.errorCode&&(e.hotKey=t.data.data)})}},Object(m.b)(["saveSearchHistory","deleteSearchHistory","clearSearchHistory"])),watch:{query:function(e){var t=this;e||(this.ensure=!1,setTimeout(function(){t.$refs.shortcut.refresh()},20))}},components:{scroll:i.a,"search-box":c,suggest:f,confirm:p.a}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search"},[s("div",{staticClass:"search-box-wrapper"},[s("search-box",{ref:"searchBox",on:{query:e.onQueryChange,keyupEnter:function(t){e.addQuery(e.query)}}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.query&&!e.ensure,expression:"query && !ensure"}],staticClass:"smart-box"},[s("div",{staticClass:"smart-box-wrapper"},[s("p",{staticClass:"ensure-wrapper",on:{click:function(t){e.addQuery(e.query)}}},[e._v("搜索“"+e._s(e.query)+"”")])])])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.query,expression:"!query"}],staticClass:"shortcut-wrapper"},[s("scroll",{ref:"shortcut",staticClass:"shortcut",attrs:{data:e.shortcut}},[s("div",[s("div",{staticClass:"hot-key"},[s("h1",{staticClass:"title"},[e._v("热门搜索")]),e._v(" "),s("ul",e._l(e.hotKey,function(t,a){return s("li",{key:a,staticClass:"item",on:{click:function(s){e.addQuery(t.name)}}},[s("span",[e._v(e._s(t.name))])])}))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.searchHistory.length,expression:"searchHistory.length"}],staticClass:"search-history"},[s("h1",{staticClass:"title"},[s("span",{staticClass:"text"},[e._v("搜索历史")]),e._v(" "),s("span",{staticClass:"clear",on:{click:e.showConfirm}},[s("i",{staticClass:"icon-delete_all"})])]),e._v(" "),s("div",{staticClass:"search-list"},[s("ul",e._l(e.searchHistory,function(t){return s("li",{key:t,staticClass:"search-item",on:{click:function(s){e.addQuery(t)}}},[s("i",{staticClass:"icon-history"}),e._v(" "),s("span",{staticClass:"text"},[e._v(e._s(t))]),e._v(" "),s("span",{staticClass:"icon",on:{click:function(s){s.stopPropagation(),e.deleteSearchHistory(t)}}},[s("i",{staticClass:"icon-delete"})])])}))])])])])],1),e._v(" "),s("div",{staticClass:"search-result"},[s("suggest",{attrs:{query:e.query,ensure:e.ensure},on:{select:e.saveSearch}})],1),e._v(" "),s("confirm",{ref:"confirm",attrs:{text:"是否清空所有搜索历史"},on:{confirm:e.clearSearchHistory}})],1)},staticRenderFns:[]};var C=s("D8HT")(g,_,!1,function(e){s("mvBJ")},null,null);t.default=C.exports},O5XS:function(e,t){},mvBJ:function(e,t){}});
//# sourceMappingURL=1.7814bfb28b1bf846bb6f.js.map